<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TaskFlow - Modern Task Management</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dayjs/1.11.10/dayjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
  <style id="app-style">
    :root {
      --primary: #7c3aed;
      --primary-light: #9361fb;
      --success: #10b981;
      --warning: #f59e0b;
      --danger: #ef4444;
      --dark-bg: #111827;
      --dark-card: #1f2937;
      --dark-input: #374151;
      --dark-border: #4b5563;
      --light-bg: #f9fafb;
      --light-card: #ffffff;
      --light-input: #f3f4f6;
      --light-border: #e5e7eb;
    }

    body {
      font-family: 'Poppins', sans-serif;
      transition: background-color 0.3s ease;
    }

    body.dark {
      background-color: var(--dark-bg);
      color: #e5e7eb;
    }

    body.light {
      background-color: var(--light-bg);
      color: #1f2937;
    }

    .app-container {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    /* Navbar */
    nav {
      height: 64px;
      transition: all 0.3s ease;
    }

    .dark nav {
      background-color: #0f172a;
      border-bottom: 1px solid #2d3748;
    }

    .light nav {
      background-color: white;
      border-bottom: 1px solid #e2e8f0;
    }

    /* Sidebar */
    .sidebar {
      transition: all 0.3s ease;
      width: 250px;
      overflow-y: auto;
    }

    .dark .sidebar {
      background-color: var(--dark-card);
      border-right: 1px solid var(--dark-border);
    }

    .light .sidebar {
      background-color: var(--light-card);
      border-right: 1px solid var(--light-border);
    }

    /* Main content */
    .main-content {
      flex: 1;
      transition: all 0.3s ease;
    }

    .dark .main-content {
      background-color: var(--dark-bg);
    }

    .light .main-content {
      background-color: var(--light-bg);
    }

    /* Cards */
    .card {
      transition: all 0.3s ease;
      border-radius: 0.5rem;
    }

    .dark .card {
      background-color: var(--dark-card);
      border: 1px solid var(--dark-border);
    }

    .light .card {
      background-color: var(--light-card);
      border: 1px solid var(--light-border);
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    /* Form elements */
    input, select, textarea, button.btn {
      border-radius: 0.375rem;
      transition: all 0.2s ease;
    }

    .dark input, .dark select, .dark textarea {
      background-color: var(--dark-input);
      border: 1px solid var(--dark-border);
      color: white;
    }

    .light input, .light select, .light textarea {
      background-color: var(--light-input);
      border: 1px solid var(--light-border);
      color: #1f2937;
    }

    /* Priority badges */
    .priority {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      display: inline-block;
    }

    .priority-high {
      background-color: var(--danger);
    }

    .priority-medium {
      background-color: var(--warning);
    }

    .priority-low {
      background-color: var(--success);
    }

    /* Task item */
    .task-item {
      transition: all 0.2s ease;
      border-left: 4px solid transparent;
    }

    .dark .task-item {
      background-color: var(--dark-card);
    }

    .light .task-item {
      background-color: var(--light-card);
    }

    .task-item:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .task-item.priority-high {
      border-left-color: var(--danger);
    }

    .task-item.priority-medium {
      border-left-color: var(--warning);
    }

    .task-item.priority-low {
      border-left-color: var(--success);
    }

    .task-completed {
      opacity: 0.6;
    }

    .task-completed .task-title {
      text-decoration: line-through;
    }

    /* Checkbox custom style */
    .custom-checkbox {
      width: 18px;
      height: 18px;
      cursor: pointer;
      border-radius: 4px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .dark .custom-checkbox {
      border: 2px solid var(--dark-border);
    }

    .light .custom-checkbox {
      border: 2px solid var(--light-border);
    }

    .custom-checkbox.checked {
      background-color: var(--primary);
      border-color: var(--primary);
    }

    /* Modal */
    .modal-backdrop {
      background-color: rgba(0, 0, 0, 0.5);
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 50;
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s ease;
    }

    .modal-backdrop.show {
      opacity: 1;
      pointer-events: auto;
    }

    .modal-content {
      width: 90%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      border-radius: 0.5rem;
      transition: all 0.3s ease;
      transform: translateY(-20px);
    }

    .modal-backdrop.show .modal-content {
      transform: translateY(0);
    }

    .dark .modal-content {
      background-color: var(--dark-card);
      border: 1px solid var(--dark-border);
    }

    .light .modal-content {
      background-color: var(--light-card);
      border: 1px solid var(--light-border);
    }

    /* Progress bar */
    .progress-bar {
      height: 6px;
      border-radius: 3px;
      background-color: #e5e7eb;
    }

    .progress-bar-fill {
      height: 100%;
      border-radius: 3px;
      background-color: var(--primary);
    }

    /* Buttons */
    .btn {
      transition: all 0.2s ease;
      border-radius: 0.375rem;
      font-weight: 500;
    }

    .btn:hover {
      transform: translateY(-1px);
    }

    .btn-primary {
      background-color: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background-color: var(--primary-light);
    }

    .btn-outline {
      border: 1px solid;
    }

    .dark .btn-outline {
      border-color: var(--dark-border);
    }

    .light .btn-outline {
      border-color: var(--light-border);
    }

    /* Toggle switch */
    .toggle-switch {
      position: relative;
      display: inline-block;
      width: 48px;
      height: 24px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #ccc;
      transition: .4s;
      border-radius: 24px;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: .4s;
      border-radius: 50%;
    }

    input:checked + .toggle-slider {
      background-color: var(--primary);
    }

    input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }

    /* Add task button */
    .add-task-btn {
      position: fixed;
      right: 24px;
      bottom: 24px;
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background-color: var(--primary);
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      transition: all 0.2s ease;
      z-index: 10;
    }

    .add-task-btn:hover {
      background-color: var(--primary-light);
      transform: translateY(-2px);
      box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
    }

    /* Animations */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .animate-fade-in {
      animation: fadeIn 0.3s ease;
    }

    /* Loading spinner */
    .loading-spinner {
      border: 3px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top: 3px solid var(--primary);
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* Responsive */
    @media (max-width: 768px) {
      .sidebar {
        position: fixed;
        left: -250px;
        top: 64px;
        bottom: 0;
        z-index: 40;
        transition: left 0.3s ease;
      }

      .sidebar.open {
        left: 0;
      }
    }

    /* Auth forms */
    .auth-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .auth-card {
      width: 100%;
      max-width: 400px;
      padding: 2rem;
    }

    /* Dashboard charts */
    .chart-container {
      position: relative;
      height: 200px;
    }

    /* Files dropzone */
    .dropzone {
      border: 2px dashed;
      border-radius: 0.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 2rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .dark .dropzone {
      border-color: var(--dark-border);
    }

    .light .dropzone {
      border-color: var(--light-border);
    }

    .dropzone:hover {
      border-color: var(--primary);
    }

    /* Calendar styles */
    .calendar-day {
      width: 36px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
    }

    .calendar-day.has-tasks {
      background-color: var(--primary);
      color: white;
    }
  </style>
</head>
<body class="dark">
  <div id="app" class="app-container">
    <!-- Auth screens -->
    <div id="auth-container" class="auth-container hidden">
      <!-- Login Form -->
      <div id="login-form" class="auth-card card animate-fade-in">
        <h2 class="text-2xl font-bold mb-6 text-center">Login to TaskFlow</h2>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="login-email">Email</label>
          <input type="email" id="login-email" class="w-full p-2" placeholder="your@email.com">
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="login-password">Password</label>
          <input type="password" id="login-password" class="w-full p-2" placeholder="••••••••">
        </div>
        <div class="flex items-center justify-between mb-4">
          <div class="flex items-center">
            <input type="checkbox" id="remember-me" class="mr-2">
            <label for="remember-me" class="text-sm">Remember me</label>
          </div>
          <a href="javascript:void(0)" onclick="showForgotPassword()" class="text-sm text-indigo-500">Forgot password?</a>
        </div>
        <button id="login-btn" class="btn btn-primary w-full py-2 mb-4">Log In</button>
        <p class="text-center text-sm">
          Don't have an account? <a href="javascript:void(0)" onclick="showSignup()" class="text-indigo-500">Sign Up</a>
        </p>
      </div>

      <!-- Signup Form -->
      <div id="signup-form" class="auth-card card animate-fade-in hidden">
        <h2 class="text-2xl font-bold mb-6 text-center">Create Account</h2>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="signup-name">Full Name</label>
          <input type="text" id="signup-name" class="w-full p-2" placeholder="John Doe">
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="signup-email">Email</label>
          <input type="email" id="signup-email" class="w-full p-2" placeholder="your@email.com">
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="signup-password">Password</label>
          <input type="password" id="signup-password" class="w-full p-2" placeholder="••••••••">
        </div>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="signup-confirm">Confirm Password</label>
          <input type="password" id="signup-confirm" class="w-full p-2" placeholder="••••••••">
        </div>
        <button id="signup-btn" class="btn btn-primary w-full py-2 mb-4">Sign Up</button>
        <p class="text-center text-sm">
          Already have an account? <a href="javascript:void(0)" onclick="showLogin()" class="text-indigo-500">Log In</a>
        </p>
      </div>

      <!-- Forgot Password Form -->
      <div id="forgot-password-form" class="auth-card card animate-fade-in hidden">
        <h2 class="text-2xl font-bold mb-6 text-center">Reset Password</h2>
        <p class="mb-4 text-sm">Enter your email address and we'll send you a link to reset your password.</p>
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="reset-email">Email</label>
          <input type="email" id="reset-email" class="w-full p-2" placeholder="your@email.com">
        </div>
        <button id="reset-btn" class="btn btn-primary w-full py-2 mb-4">Send Reset Link</button>
        <p class="text-center text-sm">
          <a href="javascript:void(0)" onclick="showLogin()" class="text-indigo-500">Back to Login</a>
        </p>
      </div>
    </div>

    <!-- Main App (after login) -->
    <div id="main-app">
      <!-- Navbar -->
      <nav class="px-4 flex items-center justify-between">
        <div class="flex items-center">
          <button id="sidebar-toggle" class="md:hidden mr-3 text-xl">
            <i class="fas fa-bars"></i>
          </button>
          <div class="flex items-center">
            <div class="text-indigo-500 text-2xl font-bold mr-2">
              <i class="fas fa-check-double"></i>
            </div>
            <h1 class="text-xl font-bold">TaskFlow</h1>
          </div>
        </div>

        <div class="flex items-center space-x-4">
          <button id="calendar-sync-btn" class="flex items-center text-sm btn btn-outline py-1 px-3">
            <i class="fas fa-calendar-alt mr-2"></i>
            <span class="hidden md:inline">Google Calendar</span>
          </button>
          
          <div class="flex items-center">
            <i class="fas fa-sun mr-2"></i>
            <label class="toggle-switch">
              <input type="checkbox" id="theme-toggle" checked>
              <span class="toggle-slider"></span>
            </label>
            <i class="fas fa-moon ml-2"></i>
          </div>

          <div class="relative">
            <button id="user-menu-btn" class="flex items-center">
              <div class="w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center text-white">
                JD
              </div>
            </button>
            <div id="user-dropdown" class="absolute right-0 mt-2 w-48 card hidden animate-fade-in z-10">
              <div class="p-2">
                <a href="javascript:void(0)" class="block px-4 py-2 hover:bg-indigo-500 hover:text-white rounded" onclick="showView('profile')">
                  <i class="fas fa-user mr-2"></i> Profile
                </a>
                <a href="javascript:void(0)" class="block px-4 py-2 hover:bg-indigo-500 hover:text-white rounded" onclick="showView('settings')">
                  <i class="fas fa-cog mr-2"></i> Settings
                </a>
                <div class="border-t my-1 dark:border-gray-600 light:border-gray-200"></div>
                <a href="javascript:void(0)" class="block px-4 py-2 hover:bg-indigo-500 hover:text-white rounded" onclick="logout()">
                  <i class="fas fa-sign-out-alt mr-2"></i> Logout
                </a>
              </div>
            </div>
          </div>
        </div>
      </nav>

      <!-- Main Content -->
      <div class="flex flex-1 overflow-hidden">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar h-[calc(100vh-64px)]">
          <div class="p-4">
            <div class="mb-6">
              <button onclick="showView('tasks')" class="w-full text-left py-2 px-3 rounded flex items-center mb-2 hover:bg-indigo-500 hover:text-white">
                <i class="fas fa-tasks mr-3 w-5 text-center"></i> 
                <span>All Tasks</span>
              </button>
              
              <button onclick="showView('today')" class="w-full text-left py-2 px-3 rounded flex items-center mb-2 hover:bg-indigo-500 hover:text-white">
                <i class="fas fa-calendar-day mr-3 w-5 text-center"></i> 
                <span>Today</span>
              </button>
              
              <button onclick="showView('upcoming')" class="w-full text-left py-2 px-3 rounded flex items-center mb-2 hover:bg-indigo-500 hover:text-white">
                <i class="fas fa-calendar mr-3 w-5 text-center"></i> 
                <span>Upcoming</span>
              </button>
              
              <button onclick="showView('dashboard')" class="w-full text-left py-2 px-3 rounded flex items-center mb-2 hover:bg-indigo-500 hover:text-white">
                <i class="fas fa-chart-pie mr-3 w-5 text-center"></i> 
                <span>Dashboard</span>
              </button>
            </div>

            <div class="mb-6">
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-sm font-medium text-gray-500">CATEGORIES</h3>
                <button class="text-xs hover:text-indigo-500">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
              
              <div id="categories-list">
                <button class="w-full text-left py-2 px-3 rounded flex items-center mb-1 hover:bg-indigo-500 hover:text-white">
                  <span class="w-3 h-3 rounded-full bg-red-500 mr-3"></span>
                  <span>Work</span>
                  <span class="ml-auto text-xs opacity-70">12</span>
                </button>
                
                <button class="w-full text-left py-2 px-3 rounded flex items-center mb-1 hover:bg-indigo-500 hover:text-white">
                  <span class="w-3 h-3 rounded-full bg-blue-500 mr-3"></span>
                  <span>Personal</span>
                  <span class="ml-auto text-xs opacity-70">8</span>
                </button>
                
                <button class="w-full text-left py-2 px-3 rounded flex items-center mb-1 hover:bg-indigo-500 hover:text-white">
                  <span class="w-3 h-3 rounded-full bg-green-500 mr-3"></span>
                  <span>Health</span>
                  <span class="ml-auto text-xs opacity-70">5</span>
                </button>
              </div>
            </div>

            <div>
              <div class="flex items-center justify-between mb-2">
                <h3 class="text-sm font-medium text-gray-500">TAGS</h3>
                <button class="text-xs hover:text-indigo-500">
                  <i class="fas fa-plus"></i>
                </button>
              </div>
              
              <div id="tags-list" class="flex flex-wrap gap-2">
                <span class="px-2 py-1 text-xs rounded-full bg-opacity-20 bg-indigo-500 text-indigo-500">#urgent</span>
                <span class="px-2 py-1 text-xs rounded-full bg-opacity-20 bg-blue-500 text-blue-500">#meeting</span>
                <span class="px-2 py-1 text-xs rounded-full bg-opacity-20 bg-green-500 text-green-500">#health</span>
                <span class="px-2 py-1 text-xs rounded-full bg-opacity-20 bg-yellow-500 text-yellow-500">#ideas</span>
              </div>
            </div>
          </div>
        </aside>

        <!-- Main Area -->
        <main class="main-content flex-1 overflow-y-auto p-4">
          <!-- Tasks View -->
          <div id="tasks-view">
            <div class="mb-6 flex flex-col md:flex-row md:items-center justify-between gap-4">
              <h2 class="text-2xl font-bold">All Tasks</h2>
              
              <div class="flex flex-col md:flex-row gap-3">
                <!-- Search -->
                <div class="relative">
                  <input type="text" placeholder="Search tasks..." class="pl-9 pr-3 py-2 w-full md:w-64">
                  <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                </div>
                
                <!-- Filter Dropdown -->
                <div class="flex gap-2">
                  <select class="px-3 py-2">
                    <option value="all">All</option>
                    <option value="completed">Completed</option>
                    <option value="pending">Pending</option>
                  </select>
                  
                  <select class="px-3 py-2">
                    <option value="all-categories">All Categories</option>
                    <option value="work">Work</option>
                    <option value="personal">Personal</option>
                    <option value="health">Health</option>
                  </select>
                </div>
              </div>
            </div>
            
            <!-- Sort Options -->
            <div class="flex justify-between items-center mb-4">
              <div class="flex items-center">
                <span class="text-sm mr-2">Sort by:</span>
                <select class="text-sm px-2 py-1">
                  <option value="due-date">Due Date</option>
                  <option value="priority">Priority</option>
                  <option value="name">Name</option>
                  <option value="created">Date Created</option>
                </select>
              </div>
              
              <div class="flex items-center">
                <span class="text-sm mr-2">View:</span>
                <button class="p-1 mx-1 rounded hover:bg-opacity-20 hover:bg-indigo-500">
                  <i class="fas fa-list"></i>
                </button>
                <button class="p-1 mx-1 rounded hover:bg-opacity-20 hover:bg-indigo-500">
                  <i class="fas fa-th-large"></i>
                </button>
              </div>
            </div>
            
            <!-- Bulk Actions -->
            <div id="bulk-actions" class="hidden bg-opacity-20 bg-indigo-500 rounded p-3 mb-4 flex items-center justify-between">
              <span class="text-sm"><span id="selected-count">0</span> items selected</span>
              <div class="flex gap-2">
                <button class="btn btn-outline text-sm py-1 px-3">
                  <i class="fas fa-check mr-1"></i> Mark Complete
                </button>
                <button class="btn btn-outline text-sm py-1 px-3 text-red-500">
                  <i class="fas fa-trash mr-1"></i> Delete
                </button>
              </div>
            </div>
            
            <!-- Tasks List -->
            <div id="tasks-list" class="space-y-3">
              <!-- Task Item 1 -->
              <div class="task-item card p-4 priority-high">
                <div class="flex items-center">
                  <div class="custom-checkbox mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs hidden"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h3 class="task-title font-medium">Finalize Q3 budget report</h3>
                    <div class="text-sm opacity-70 mt-1">
                      <span><i class="far fa-calendar mr-1"></i> Today, 5:00 PM</span>
                      <span class="mx-2">•</span>
                      <span class="text-red-500"><i class="far fa-flag mr-1"></i> High Priority</span>
                    </div>
                    
                    <div class="mt-2 flex items-center">
                      <div class="mr-4">
                        <div class="text-xs opacity-70 mb-1">Subtasks: 2/5</div>
                        <div class="progress-bar">
                          <div class="progress-bar-fill" style="width: 40%"></div>
                        </div>
                      </div>
                      
                      <div class="flex ml-auto">
                        <span class="text-xs px-2 py-1 rounded-full bg-opacity-20 bg-blue-500 text-blue-500">#work</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="ml-3 flex">
                    <button class="p-2 hover:text-indigo-500" onclick="editTask(1)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="p-2 hover:text-red-500" onclick="confirmDeleteTask(1)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- Task Item 2 -->
              <div class="task-item card p-4 priority-medium">
                <div class="flex items-center">
                  <div class="custom-checkbox mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs hidden"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h3 class="task-title font-medium">Schedule doctor appointment</h3>
                    <div class="text-sm opacity-70 mt-1">
                      <span><i class="far fa-calendar mr-1"></i> Tomorrow, 12:00 PM</span>
                      <span class="mx-2">•</span>
                      <span class="text-yellow-500"><i class="far fa-flag mr-1"></i> Medium Priority</span>
                    </div>
                    
                    <div class="mt-2 flex items-center">
                      <div class="flex ml-auto">
                        <span class="text-xs px-2 py-1 rounded-full bg-opacity-20 bg-green-500 text-green-500">#health</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="ml-3 flex">
                    <button class="p-2 hover:text-indigo-500" onclick="editTask(2)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="p-2 hover:text-red-500" onclick="confirmDeleteTask(2)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- Task Item 3 -->
              <div class="task-item card p-4 priority-low task-completed">
                <div class="flex items-center">
                  <div class="custom-checkbox checked mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h3 class="task-title font-medium">Buy groceries</h3>
                    <div class="text-sm opacity-70 mt-1">
                      <span><i class="far fa-calendar mr-1"></i> Yesterday</span>
                      <span class="mx-2">•</span>
                      <span class="text-green-500"><i class="far fa-flag mr-1"></i> Low Priority</span>
                    </div>
                    
                    <div class="mt-2 flex items-center">
                      <div class="flex ml-auto">
                        <span class="text-xs px-2 py-1 rounded-full bg-opacity-20 bg-blue-500 text-blue-500">#personal</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="ml-3 flex">
                    <button class="p-2 hover:text-indigo-500" onclick="editTask(3)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="p-2 hover:text-red-500" onclick="confirmDeleteTask(3)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
              
              <!-- Task Item 4 -->
              <div class="task-item card p-4 priority-high">
                <div class="flex items-center">
                  <div class="custom-checkbox mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs hidden"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h3 class="task-title font-medium">Prepare presentation for client meeting</h3>
                    <div class="text-sm opacity-70 mt-1">
                      <span><i class="far fa-calendar mr-1"></i> In 2 days</span>
                      <span class="mx-2">•</span>
                      <span class="text-red-500"><i class="far fa-flag mr-1"></i> High Priority</span>
                    </div>
                    
                    <div class="mt-2 flex items-center">
                      <div class="mr-4">
                        <div class="text-xs opacity-70 mb-1">Subtasks: 1/3</div>
                        <div class="progress-bar">
                          <div class="progress-bar-fill" style="width: 33%"></div>
                        </div>
                      </div>
                      
                      <div class="flex ml-auto space-x-1">
                        <span class="text-xs px-2 py-1 rounded-full bg-opacity-20 bg-blue-500 text-blue-500">#work</span>
                        <span class="text-xs px-2 py-1 rounded-full bg-opacity-20 bg-yellow-500 text-yellow-500">#meeting</span>
                      </div>
                    </div>
                  </div>
                  
                  <div class="ml-3 flex">
                    <button class="p-2 hover:text-indigo-500" onclick="editTask(4)">
                      <i class="fas fa-edit"></i>
                    </button>
                    <button class="p-2 hover:text-red-500" onclick="confirmDeleteTask(4)">
                      <i class="fas fa-trash"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Dashboard View -->
          <div id="dashboard-view" class="hidden">
            <h2 class="text-2xl font-bold mb-6">Dashboard</h2>
            
            <!-- Stats Overview -->
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
              <div class="card p-4">
                <div class="text-sm opacity-70 mb-1">Tasks Today</div>
                <div class="text-2xl font-bold">5</div>
                <div class="text-xs opacity-70 mt-2">
                  <i class="fas fa-arrow-up text-green-500"></i> 2 more than yesterday
                </div>
              </div>
              
              <div class="card p-4">
                <div class="text-sm opacity-70 mb-1">Completed</div>
                <div class="text-2xl font-bold">16</div>
                <div class="text-xs opacity-70 mt-2">
                  <i class="fas fa-arrow-up text-green-500"></i> 8 this week
                </div>
              </div>
              
              <div class="card p-4">
                <div class="text-sm opacity-70 mb-1">Upcoming</div>
                <div class="text-2xl font-bold">24</div>
                <div class="text-xs opacity-70 mt-2">
                  <i class="fas fa-calendar text-indigo-500"></i> Next 7 days
                </div>
              </div>
              
              <div class="card p-4">
                <div class="text-sm opacity-70 mb-1">Overdue</div>
                <div class="text-2xl font-bold text-red-500">3</div>
                <div class="text-xs opacity-70 mt-2">
                  <i class="fas fa-exclamation-circle text-red-500"></i> Requires attention
                </div>
              </div>
            </div>
            
            <!-- Charts -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div class="card p-4">
                <h3 class="font-medium mb-4">Task Completion Trend</h3>
                <div class="chart-container">
                  <canvas id="completion-chart"></canvas>
                </div>
              </div>
              
              <div class="card p-4">
                <h3 class="font-medium mb-4">Tasks by Category</h3>
                <div class="chart-container">
                  <canvas id="category-chart"></canvas>
                </div>
              </div>
            </div>
            
            <!-- Today's Tasks -->
            <div class="card p-4 mb-6">
              <h3 class="font-medium mb-4">Today's Tasks</h3>
              <div class="space-y-3">
                <div class="flex items-center">
                  <div class="custom-checkbox mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs hidden"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h4 class="task-title font-medium">Finalize Q3 budget report</h4>
                    <div class="text-sm opacity-70">5:00 PM • High Priority</div>
                  </div>
                  
                  <div class="ml-3">
                    <span class="priority priority-high"></span>
                  </div>
                </div>
                
                <div class="border-t dark:border-gray-700 light:border-gray-200"></div>
                
                <div class="flex items-center">
                  <div class="custom-checkbox mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs hidden"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h4 class="task-title font-medium">Team stand-up meeting</h4>
                    <div class="text-sm opacity-70">2:00 PM • Medium Priority</div>
                  </div>
                  
                  <div class="ml-3">
                    <span class="priority priority-medium"></span>
                  </div>
                </div>
                
                <div class="border-t dark:border-gray-700 light:border-gray-200"></div>
                
                <div class="flex items-center">
                  <div class="custom-checkbox mr-3" onclick="toggleTaskComplete(this)">
                    <i class="fas fa-check text-white text-xs hidden"></i>
                  </div>
                  
                  <div class="flex-1">
                    <h4 class="task-title font-medium">Review design mockups</h4>
                    <div class="text-sm opacity-70">11:00 AM • Medium Priority</div>
                  </div>
                  
                  <div class="ml-3">
                    <span class="priority priority-medium"></span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Activity Calendar -->
            <div class="card p-4">
              <h3 class="font-medium mb-4">Activity Calendar</h3>
              <div class="grid grid-cols-7 gap-2">
                <div class="text-center text-xs opacity-70">Mon</div>
                <div class="text-center text-xs opacity-70">Tue</div>
                <div class="text-center text-xs opacity-70">Wed</div>
                <div class="text-center text-xs opacity-70">Thu</div>
                <div class="text-center text-xs opacity-70">Fri</div>
                <div class="text-center text-xs opacity-70">Sat</div>
                <div class="text-center text-xs opacity-70">Sun</div>
                
                <!-- Calendar Cells -->
                <div class="calendar-day">1</div>
                <div class="calendar-day has-tasks">2</div>
                <div class="calendar-day has-tasks">3</div>
                <div class="calendar-day">4</div>
                <div class="calendar-day has-tasks">5</div>
                <div class="calendar-day">6</div>
                <div class="calendar-day">7</div>
                <div class="calendar-day has-tasks">8</div>
                <div class="calendar-day">9</div>
                <div class="calendar-day">10</div>
                <div class="calendar-day has-tasks">11</div>
                <div class="calendar-day">12</div>
                <div class="calendar-day has-tasks">13</div>
                <div class="calendar-day">14</div>
              </div>
            </div>
          </div>
          
          <!-- Profile View -->
          <div id="profile-view" class="hidden">
            <h2 class="text-2xl font-bold mb-6">My Profile</h2>
            
            <div class="card p-6 mb-6">
              <div class="flex flex-col md:flex-row items-start gap-6">
                <div class="w-full md:w-1/3 flex flex-col items-center">
                  <div class="w-32 h-32 bg-indigo-500 rounded-full flex items-center justify-center text-white text-4xl mb-4">
                    JD
                  </div>
                  <button class="btn btn-outline text-sm py-1 px-3 mt-2">
                    <i class="fas fa-camera mr-1"></i> Change Photo
                  </button>
                </div>
                
                <div class="w-full md:w-2/3">
                  <div class="mb-4">
                    <label class="block text-sm font-medium mb-1" for="profile-name">Full Name</label>
                    <input type="text" id="profile-name" class="w-full p-2" value="John Doe">
                  </div>
                  
                  <div class="mb-4">
                    <label class="block text-sm font-medium mb-1" for="profile-email">Email</label>
                    <input type="email" id="profile-email" class="w-full p-2" value="john@example.com">
                  </div>
                  
                  <div class="mb-4">
                    <label class="block text-sm font-medium mb-1" for="profile-bio">Bio</label>
                    <textarea id="profile-bio" class="w-full p-2" rows="3">Product Manager with a passion for organization and productivity.</textarea>
                  </div>
                  
                  <div>
                    <button class="btn btn-primary py-2 px-4">
                      <i class="fas fa-save mr-1"></i> Save Changes
                    </button>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="card p-6">
              <h3 class="text-xl font-medium mb-4">Account Statistics</h3>
              
              <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
                <div>
                  <div class="text-sm opacity-70 mb-1">Member Since</div>
                  <div class="font-medium">Jan 15, 2025</div>
                </div>
                
                <div>
                  <div class="text-sm opacity-70 mb-1">Tasks Created</div>
                  <div class="font-medium">124</div>
                </div>
                
                <div>
                  <div class="text-sm opacity-70 mb-1">Tasks Completed</div>
                  <div class="font-medium">87</div>
                </div>
                
                <div>
                  <div class="text-sm opacity-70 mb-1">Completion Rate</div>
                  <div class="font-medium">70%</div>
                </div>
              </div>
              
              <div class="mt-6 border-t dark:border-gray-700 light:border-gray-200 pt-4">
                <h4 class="font-medium mb-3">Linked Accounts</h4>
                
                <div class="flex items-center justify-between mb-3">
                  <div class="flex items-center">
                    <i class="fab fa-google text-red-500 mr-3 text-xl"></i>
                    <div>
                      <div class="font-medium">Google</div>
                      <div class="text-xs opacity-70">For Google Calendar sync</div>
                    </div>
                  </div>
                  
                  <button class="btn btn-outline text-sm py-1 px-3">Connect</button>
                </div>
                
                <div class="flex items-center justify-between">
                  <div class="flex items-center">
                    <i class="fab fa-microsoft text-blue-500 mr-3 text-xl"></i>
                    <div>
                      <div class="font-medium">Microsoft</div>
                      <div class="text-xs opacity-70">For Outlook integration</div>
                    </div>
                  </div>
                  
                  <button class="btn btn-outline text-sm py-1 px-3">Connect</button>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Settings View -->
          <div id="settings-view" class="hidden">
            <h2 class="text-2xl font-bold mb-6">Settings</h2>
            
            <div class="card p-6 mb-6">
              <h3 class="text-xl font-medium mb-4">General Preferences</h3>
              
              <div class="mb-4">
                <label class="block text-sm font-medium mb-1" for="settings-timezone">Time Zone</label>
                <select id="settings-timezone" class="w-full p-2">
                  <option value="utc-8">Pacific Time (UTC-8)</option>
                  <option value="utc-5">Eastern Time (UTC-5)</option>
                  <option value="utc+0">UTC</option>
                  <option value="utc+1">Central European Time (UTC+1)</option>
                  <option value="utc+8">China Standard Time (UTC+8)</option>
                </select>
              </div>
              
              <div class="mb-4">
                <label class="block text-sm font-medium mb-1" for="settings-date-format">Date Format</label>
                <select id="settings-date-format" class="w-full p-2">
                  <option value="mm-dd-yyyy">MM/DD/YYYY</option>
                  <option value="dd-mm-yyyy">DD/MM/YYYY</option>
                  <option value="yyyy-mm-dd">YYYY/MM/DD</option>
                </select>
              </div>
              
              <div class="mb-4">
                <label class="block text-sm font-medium mb-1" for="settings-time-format">Time Format</label>
                <select id="settings-time-format" class="w-full p-2">
                  <option value="12h">12-hour (AM/PM)</option>
                  <option value="24h">24-hour</option>
                </select>
              </div>
              
              <div class="flex items-center justify-between mb-4">
                <div>
                  <label class="font-medium">Dark Mode</label>
                  <p class="text-sm opacity-70">Toggle between light and dark theme</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="settings-theme-toggle" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
            </div>
            
            <div class="card p-6 mb-6">
              <h3 class="text-xl font-medium mb-4">Task Preferences</h3>
              
              <div class="mb-4">
                <label class="block text-sm font-medium mb-1" for="settings-default-priority">Default Priority</label>
                <select id="settings-default-priority" class="w-full p-2">
                  <option value="low">Low</option>
                  <option value="medium">Medium</option>
                  <option value="high">High</option>
                </select>
              </div>
              
              <div class="mb-4">
                <label class="block text-sm font-medium mb-1" for="settings-default-reminder">Default Reminder Time</label>
                <select id="settings-default-reminder" class="w-full p-2">
                  <option value="none">None</option>
                  <option value="15min">15 minutes before</option>
                  <option value="1hour">1 hour before</option>
                  <option value="1day">1 day before</option>
                </select>
              </div>
              
              <div class="flex items-center justify-between mb-4">
                <div>
                  <label class="font-medium">Show Completed Tasks</label>
                  <p class="text-sm opacity-70">Display completed tasks in lists</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="settings-show-completed" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="flex items-center justify-between mb-4">
                <div>
                  <label class="font-medium">Task Sorting</label>
                  <p class="text-sm opacity-70">Default sort order for tasks</p>
                </div>
                <select id="settings-default-sort" class="w-40 p-2">
                  <option value="due-date">Due Date</option>
                  <option value="priority">Priority</option>
                  <option value="name">Name</option>
                  <option value="created">Date Created</option>
                </select>
              </div>
            </div>
            
            <div class="card p-6">
              <h3 class="text-xl font-medium mb-4">Notification Settings</h3>
              
              <div class="flex items-center justify-between mb-4">
                <div>
                  <label class="font-medium">Email Notifications</label>
                  <p class="text-sm opacity-70">Receive task reminders via email</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="settings-email-notifications">
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="flex items-center justify-between mb-4">
                <div>
                  <label class="font-medium">Browser Notifications</label>
                  <p class="text-sm opacity-70">Receive task reminders in your browser</p>
                </div>
                <label class="toggle-switch">
                  <input type="checkbox" id="settings-browser-notifications" checked>
                  <span class="toggle-slider"></span>
                </label>
              </div>
              
              <div class="mt-6 pt-4 border-t dark:border-gray-700 light:border-gray-200">
                <button class="btn btn-primary py-2 px-4">
                  <i class="fas fa-save mr-1"></i> Save Settings
                </button>
                <button class="btn btn-outline py-2 px-4 ml-2">
                  <i class="fas fa-undo mr-1"></i> Reset Defaults
                </button>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>
    
    <!-- Add Task Button -->
    <button id="add-task-btn" class="add-task-btn" onclick="showAddTaskModal()">
      <i class="fas fa-plus"></i>
    </button>
    
    <!-- Modals -->
    <!-- Add/Edit Task Modal -->
    <div id="task-modal" class="modal-backdrop">
      <div class="modal-content p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 id="task-modal-title" class="text-xl font-bold">Add New Task</h3>
          <button onclick="closeTaskModal()" class="text-xl hover:text-red-500">
            <i class="fas fa-times"></i>
          </button>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="task-title">Task Title</label>
          <input type="text" id="task-title" class="w-full p-2" placeholder="Enter task title">
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="task-description">Description</label>
          <textarea id="task-description" class="w-full p-2" rows="3" placeholder="Enter task description"></textarea>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium mb-1" for="task-due-date">Due Date</label>
            <input type="date" id="task-due-date" class="w-full p-2">
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-1" for="task-due-time">Due Time</label>
            <input type="time" id="task-due-time" class="w-full p-2">
          </div>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
          <div>
            <label class="block text-sm font-medium mb-1" for="task-priority">Priority</label>
            <select id="task-priority" class="w-full p-2">
              <option value="low">Low</option>
              <option value="medium">Medium</option>
              <option value="high">High</option>
            </select>
          </div>
          
          <div>
            <label class="block text-sm font-medium mb-1" for="task-category">Category</label>
            <select id="task-category" class="w-full p-2">
              <option value="work">Work</option>
              <option value="personal">Personal</option>
              <option value="health">Health</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Tags</label>
          <div class="flex flex-wrap gap-2">
            <span class="px-2 py-1 text-xs rounded-full bg-opacity-20 bg-indigo-500 text-indigo-500 flex items-center">
              #urgent
              <button class="ml-1 text-xs">×</button>
            </span>
            <span class="px-2 py-1 text-xs rounded-full bg-opacity-20 bg-blue-500 text-blue-500 flex items-center">
              #meeting
              <button class="ml-1 text-xs">×</button>
            </span>
            <input type="text" class="text-sm border-none outline-none bg-transparent" placeholder="Add tag...">
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1" for="task-reminder">Reminder</label>
          <select id="task-reminder" class="w-full p-2">
            <option value="none">None</option>
            <option value="15min">15 minutes before</option>
            <option value="1hour">1 hour before</option>
            <option value="1day">1 day before</option>
          </select>
        </div>
        
        <div class="mb-4">
          <div class="flex items-center justify-between mb-2">
            <label class="text-sm font-medium">Subtasks</label>
            <button id="add-subtask-btn" class="text-xs text-indigo-500">
              <i class="fas fa-plus"></i> Add Subtask
            </button>
          </div>
          
          <div id="subtasks-container" class="space-y-2">
            <div class="flex items-center">
              <input type="checkbox" class="mr-2">
              <input type="text" class="w-full p-2 text-sm" placeholder="Subtask 1">
              <button class="ml-2 text-red-500">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="flex items-center mb-2">
            <input type="checkbox" id="task-recurring" class="mr-2">
            <span class="text-sm font-medium">Recurring Task</span>
          </label>
          
          <div id="recurring-options" class="ml-6 hidden">
            <select id="recurring-pattern" class="w-full p-2 mb-2">
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
              <option value="custom">Custom</option>
            </select>
          </div>
        </div>
        
        <div class="mb-4">
          <label class="block text-sm font-medium mb-1">Attachments</label>
          <div class="dropzone">
            <i class="fas fa-cloud-upload-alt text-3xl mb-2"></i>
            <p>Drag and drop files here, or click to browse</p>
          </div>
        </div>
        
        <div class="flex justify-end space-x-3">
          <button onclick="closeTaskModal()" class="btn btn-outline py-2 px-4">Cancel</button>
          <button id="save-task-btn" class="btn btn-primary py-2 px-4">Save Task</button>
        </div>
      </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal-backdrop">
      <div class="modal-content p-6" style="max-width: 400px;">
        <div class="text-center mb-6">
          <i class="fas fa-exclamation-triangle text-red-500 text-4xl mb-4"></i>
          <h3 class="text-xl font-bold">Delete Task</h3>
          <p class="mt-2">Are you sure you want to delete this task? This action cannot be undone.</p>
        </div>
        
        <div class="flex justify-center space-x-3">
          <button onclick="closeDeleteModal()" class="btn btn-outline py-2 px-4">Cancel</button>
          <button id="confirm-delete-btn" class="btn btn-primary bg-red-500 py-2 px-4">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <script id="app-script">
    // Global variables
    let currentView = 'tasks';
    let isLoggedIn = false;
    let darkMode = true;
    let currentTaskId = null;
    
    // Initialize the app
    document.addEventListener('DOMContentLoaded', () => {
      initApp();
      setupCharts();
      setupEventListeners();
    });
    
    function initApp() {
      // Check if user is logged in (would normally check server session)
      const fakeLoggedIn = localStorage.getItem('taskflow_logged_in');
      
      if (fakeLoggedIn === 'true') {
        showMainApp();
      } else {
        showAuthScreen();
      }
      
      // Initialize theme based on saved preference or system preference
      const savedTheme = localStorage.getItem('taskflow_theme');
      if (savedTheme === 'light') {
        toggleTheme(false);
      } else if (savedTheme === 'dark') {
        toggleTheme(true);
      }
      
      // Initialize sortable tasks
      const tasksList = document.getElementById('tasks-list');
      new Sortable(tasksList, {
        animation: 150,
        ghostClass: 'opacity-50'
      });
    }
    
    function setupEventListeners() {
      // Theme toggle
      document.getElementById('theme-toggle').addEventListener('change', (e) => {
        toggleTheme(e.target.checked);
      });
      
      // Settings theme toggle sync
      if (document.getElementById('settings-theme-toggle')) {
        document.getElementById('settings-theme-toggle').addEventListener('change', (e) => {
          document.getElementById('theme-toggle').checked = e.target.checked;
          toggleTheme(e.target.checked);
        });
      }
      
      // User dropdown toggle
      document.getElementById('user-menu-btn').addEventListener('click', () => {
        document.getElementById('user-dropdown').classList.toggle('hidden');
      });
      
      // Close dropdown when clicking elsewhere
      document.addEventListener('click', (e) => {
        if (!e.target.closest('#user-menu-btn') && !e.target.closest('#user-dropdown')) {
          document.getElementById('user-dropdown').classList.add('hidden');
        }
      });
      
      // Mobile sidebar toggle
      document.getElementById('sidebar-toggle').addEventListener('click', () => {
        document.getElementById('sidebar').classList.toggle('open');
      });
      
      // Recurring task toggle
      if (document.getElementById('task-recurring')) {
        document.getElementById('task-recurring').addEventListener('change', (e) => {
          document.getElementById('recurring-options').classList.toggle('hidden', !e.target.checked);
        });
      }
      
      // Add subtask button
      if (document.getElementById('add-subtask-btn')) {
        document.getElementById('add-subtask-btn').addEventListener('click', addSubtask);
      }
      
      // Save task button
      if (document.getElementById('save-task-btn')) {
        document.getElementById('save-task-btn').addEventListener('click', saveTask);
      }
      
      // Login button
      if (document.getElementById('login-btn')) {
        document.getElementById('login-btn').addEventListener('click', performLogin);
      }
      
      // Signup button
      if (document.getElementById('signup-btn')) {
        document.getElementById('signup-btn').addEventListener('click', performSignup);
      }
      
      // Reset password button
      if (document.getElementById('reset-btn')) {
        document.getElementById('reset-btn').addEventListener('click', performPasswordReset);
      }
      
      // Confirm delete button
      if (document.getElementById('confirm-delete-btn')) {
        document.getElementById('confirm-delete-btn').addEventListener('click', performDeleteTask);
      }
    }
    
    // Authentication functions
    function performLogin() {
      // This would normally validate and send to server
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      if (!email || !password) {
        alert('Please enter your email and password');
        return;
      }
      
      // Fake login for prototype
      localStorage.setItem('taskflow_logged_in', 'true');
      showMainApp();
    }
    
    function performSignup() {
      // This would normally validate and send to server
      const name = document.getElementById('signup-name').value;
      const email = document.getElementById('signup-email').value;
      const password = document.getElementById('signup-password').value;
      const confirm = document.getElementById('signup-confirm').value;
      
      if (!name || !email || !password || !confirm) {
        alert('Please fill in all fields');
        return;
      }
      
      if (password !== confirm) {
        alert('Passwords do not match');
        return;
      }
      
      // Fake signup for prototype
      localStorage.setItem('taskflow_logged_in', 'true');
      showMainApp();
    }
    
    function performPasswordReset() {
      const email = document.getElementById('reset-email').value;
      
      if (!email) {
        alert('Please enter your email address');
        return;
      }
      
      alert('Password reset link has been sent to your email');
      showLogin();
    }
    
    function logout() {
      localStorage.removeItem('taskflow_logged_in');
      showAuthScreen();
    }
    
    function showLogin() {
      document.getElementById('login-form').classList.remove('hidden');
      document.getElementById('signup-form').classList.add('hidden');
      document.getElementById('forgot-password-form').classList.add('hidden');
    }
    
    function showSignup() {
      document.getElementById('login-form').classList.add('hidden');
      document.getElementById('signup-form').classList.remove('hidden');
      document.getElementById('forgot-password-form').classList.add('hidden');
    }
    
    function showForgotPassword() {
      document.getElementById('login-form').classList.add('hidden');
      document.getElementById('signup-form').classList.add('hidden');
      document.getElementById('forgot-password-form').classList.remove('hidden');
    }
    
    function showAuthScreen() {
      isLoggedIn = false;
      document.getElementById('auth-container').classList.remove('hidden');
      document.getElementById('main-app').classList.add('hidden');
      showLogin();
    }
    
    function showMainApp() {
      isLoggedIn = true;
      document.getElementById('auth-container').classList.add('hidden');
      document.getElementById('main-app').classList.remove('hidden');
      showView('tasks');
    }
    
    // UI manipulation functions
    function toggleTheme(isDark) {
      darkMode = isDark;
      
      if (isDark) {
        document.body.classList.add('dark');
        document.body.classList.remove('light');
        localStorage.setItem('taskflow_theme', 'dark');
      } else {
        document.body.classList.add('light');
        document.body.classList.remove('dark');
        localStorage.setItem('taskflow_theme', 'light');
      }
      
      // Sync settings toggle if it exists
      const settingsToggle = document.getElementById('settings-theme-toggle');
      if (settingsToggle) {
        settingsToggle.checked = isDark;
      }
      
      // Sync navbar toggle
      document.getElementById('theme-toggle').checked = isDark;
    }
    
    function showView(viewName) {
      // Hide all views
      document.getElementById('tasks-view').classList.add('hidden');
      document.getElementById('dashboard-view').classList.add('hidden');
      document.getElementById('profile-view').classList.add('hidden');
      document.getElementById('settings-view').classList.add('hidden');
      
      // Close mobile sidebar if open
      document.getElementById('sidebar').classList.remove('open');
      
      // Show selected view
      document.getElementById(`${viewName}-view`).classList.remove('hidden');
      currentView = viewName;
      
      // If showing dashboard, refresh charts
      if (viewName === 'dashboard') {
        setupCharts();
      }
    }
    
    // Task functions
    function toggleTaskComplete(checkbox) {
      checkbox.classList.toggle('checked');
      
      // Find the task item and toggle completed class
      const taskItem = checkbox.closest('.task-item');
      if (taskItem) {
        taskItem.classList.toggle('task-completed');
      }
      
      // Show/hide checkmark icon
      const checkIcon = checkbox.querySelector('.fa-check');
      if (checkbox.classList.contains('checked')) {
        checkIcon.classList.remove('hidden');
      } else {
        checkIcon.classList.add('hidden');
      }
    }
    
    function showAddTaskModal() {
      // Clear form for new task
      document.getElementById('task-modal-title').textContent = 'Add New Task';
      document.getElementById('task-title').value = '';
      document.getElementById('task-description').value = '';
      document.getElementById('task-due-date').value = '';
      document.getElementById('task-due-time').value = '';
      document.getElementById('task-priority').value = 'medium';
      document.getElementById('task-category').value = 'work';
      document.getElementById('task-reminder').value = 'none';
      document.getElementById('task-recurring').checked = false;
      document.getElementById('recurring-options').classList.add('hidden');
      
      // Clear subtasks
      const subtasksContainer = document.getElementById('subtasks-container');
      subtasksContainer.innerHTML = '';
      
      // Show modal
      currentTaskId = null;
      document.getElementById('task-modal').classList.add('show');
    }
    
    function editTask(taskId) {
      // In a real app, we'd fetch task details from API
      // For prototype, we'll use dummy data
      document.getElementById('task-modal-title').textContent = 'Edit Task';
      
      // Sample data for the task with ID 1
      if (taskId === 1) {
        document.getElementById('task-title').value = 'Finalize Q3 budget report';
        document.getElementById('task-description').value = 'Complete financial analysis and prepare summary for board meeting';
        document.getElementById('task-due-date').value = '2025-05-15';
        document.getElementById('task-due-time').value = '17:00';
        document.getElementById('task-priority').value = 'high';
        document.getElementById('task-category').value = 'work';
        document.getElementById('task-reminder').value = '1hour';
      } else {
        // Default placeholder data for other tasks
        document.getElementById('task-title').value = 'Task #' + taskId;
        document.getElementById('task-due-date').value = '2025-05-20';
      }
      
      currentTaskId = taskId;
      document.getElementById('task-modal').classList.add('show');
    }
    
    function closeTaskModal() {
      document.getElementById('task-modal').classList.remove('show');
    }
    
    function addSubtask() {
      const subtasksContainer = document.getElementById('subtasks-container');
      const subtaskDiv = document.createElement('div');
      subtaskDiv.className = 'flex items-center';
      subtaskDiv.innerHTML = `
        <input type="checkbox" class="mr-2">
        <input type="text" class="w-full p-2 text-sm" placeholder="New Subtask">
        <button class="ml-2 text-red-500" onclick="removeSubtask(this)">
          <i class="fas fa-trash"></i>
        </button>
      `;
      subtasksContainer.appendChild(subtaskDiv);
    }
    
    function removeSubtask(button) {
      const subtaskDiv = button.parentElement;
      subtaskDiv.remove();
    }
    
    function saveTask() {
      // Get form values
      const title = document.getElementById('task-title').value;
      
      if (!title) {
        alert('Please enter a task title');
        return;
      }
      
      // For prototype, just close modal
      // In real app, would save to API
      closeTaskModal();
      
      // Refresh task list (in real app would fetch from API)
      // For prototype, we'll just leave as is
    }
    
    function confirmDeleteTask(taskId) {
      currentTaskId = taskId;
      document.getElementById('delete-modal').classList.add('show');
    }
    
    function closeDeleteModal() {
      document.getElementById('delete-modal').classList.remove('show');
    }
    
    function performDeleteTask() {
      // In real app, would call API to delete task
      // For prototype, close modal and do nothing
      closeDeleteModal();
    }
    
    // Chart setup
    function setupCharts() {
      // Only set up charts if they exist and we're on the dashboard
      if (currentView !== 'dashboard' || !document.getElementById('completion-chart')) {
        return;
      }
      
      // Completion trend chart
      const completionCtx = document.getElementById('completion-chart').getContext('2d');
      new Chart(completionCtx, {
        type: 'line',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          datasets: [{
            label: 'Tasks Completed',
            data: [3, 5, 2, 7, 4, 2, 5],
            borderColor: '#7c3aed',
            backgroundColor: 'rgba(124, 58, 237, 0.1)',
            tension: 0.3,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                precision: 0
              }
            }
          }
        }
      });
      
      // Category chart
      const categoryCtx = document.getElementById('category-chart').getContext('2d');
      new Chart(categoryCtx, {
        type: 'doughnut',
        data: {
          labels: ['Work', 'Personal', 'Health', 'Other'],
          datasets: [{
            data: [12, 8, 5, 3],
            backgroundColor: [
              '#ef4444',
              '#3b82f6',
              '#10b981',
              '#f59e0b'
            ]
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right'
            }
          }
        }
      });
    }
  </script>
</body>
</html>